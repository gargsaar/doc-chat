import{S as Be,i as Ne,s as je,e as pe,b as J,G as le,H as ye,h as o,k as h,a as U,q as S,l as g,m as u,c as M,r as z,n as l,C as a,u as X,I as He,E as ne,F as oe,w as Ue,R as Me,y as xe,z as ke,A as we,U as Se,g as De,d as Ee,B as Te,L as ze,D as Le}from"../chunks/index.76caacdb.js";import{A as Pe}from"../chunks/AuthGuard.1185a6fa.js";import{d as qe,a as Fe}from"../chunks/documents.77d08bd7.js";function Ce(r){let e,t,s,n,d,f,C,b,v,k,H,w,_,m,c,D,T,A,E,q;function Y(x,I){return x[5]?Ye:Re}let R=Y(r),p=R(r);return{c(){e=h("div"),t=h("div"),s=h("div"),p.c(),d=U(),f=h("h3"),C=S(r[1]),b=U(),v=h("p"),k=S(r[2]),H=U(),w=h("div"),_=h("button"),m=S(r[4]),c=U(),D=h("button"),T=S(r[3]),this.h()},l(x){e=g(x,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var I=u(e);t=g(I,"DIV",{class:!0});var O=u(t);s=g(O,"DIV",{class:!0});var K=u(s);p.l(K),K.forEach(o),d=M(O),f=g(O,"H3",{id:!0,class:!0});var Q=u(f);C=z(Q,r[1]),Q.forEach(o),b=M(O),v=g(O,"P",{class:!0});var N=u(v);k=z(N,r[2]),N.forEach(o),H=M(O),w=g(O,"DIV",{class:!0});var y=u(w);_=g(y,"BUTTON",{type:!0,class:!0});var L=u(_);m=z(L,r[4]),L.forEach(o),c=M(y),D=g(y,"BUTTON",{type:!0,class:!0});var G=u(D);T=z(G,r[3]),G.forEach(o),y.forEach(o),O.forEach(o),I.forEach(o),this.h()},h(){l(s,"class",n="flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full "+(r[5]?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30")),l(f,"id","modal-title"),l(f,"class","text-lg font-semibold text-gray-900 dark:text-white text-center mb-2"),l(v,"class","text-sm text-gray-600 dark:text-gray-300 text-center mb-6"),l(_,"type","button"),l(_,"class","flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"),l(D,"type","button"),l(D,"class",A="flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors "+(r[5]?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500")),l(w,"class","flex space-x-3"),l(t,"class","glass-card rounded-2xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 scale-100 svelte-16m44kq"),l(e,"class","fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4"),l(e,"role","dialog"),l(e,"aria-modal","true"),l(e,"aria-labelledby","modal-title")},m(x,I){J(x,e,I),a(e,t),a(t,s),p.m(s,null),a(t,d),a(t,f),a(f,C),a(t,b),a(t,v),a(v,k),a(t,H),a(t,w),a(w,_),a(_,m),a(w,c),a(w,D),a(D,T),E||(q=[le(_,"click",r[7]),le(D,"click",r[6]),le(e,"click",r[9])],E=!0)},p(x,I){R!==(R=Y(x))&&(p.d(1),p=R(x),p&&(p.c(),p.m(s,null))),I&32&&n!==(n="flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full "+(x[5]?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30"))&&l(s,"class",n),I&2&&X(C,x[1]),I&4&&X(k,x[2]),I&16&&X(m,x[4]),I&8&&X(T,x[3]),I&32&&A!==(A="flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors "+(x[5]?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"))&&l(D,"class",A)},d(x){x&&o(e),p.d(),E=!1,He(q)}}}function Re(r){let e,t;return{c(){e=ne("svg"),t=ne("path"),this.h()},l(s){e=oe(s,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var n=u(e);t=oe(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),u(t).forEach(o),n.forEach(o),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(e,"class","w-6 h-6 text-blue-600 dark:text-blue-400"),l(e,"fill","none"),l(e,"stroke","currentColor"),l(e,"viewBox","0 0 24 24")},m(s,n){J(s,e,n),a(e,t)},d(s){s&&o(e)}}}function Ye(r){let e,t;return{c(){e=ne("svg"),t=ne("path"),this.h()},l(s){e=oe(s,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var n=u(e);t=oe(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),u(t).forEach(o),n.forEach(o),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"),l(e,"class","w-6 h-6 text-red-600 dark:text-red-400"),l(e,"fill","none"),l(e,"stroke","currentColor"),l(e,"viewBox","0 0 24 24")},m(s,n){J(s,e,n),a(e,t)},d(s){s&&o(e)}}}function Ge(r){let e,t,s,n=r[0]&&Ce(r);return{c(){n&&n.c(),e=pe()},l(d){n&&n.l(d),e=pe()},m(d,f){n&&n.m(d,f),J(d,e,f),t||(s=le(window,"keydown",r[8]),t=!0)},p(d,[f]){d[0]?n?n.p(d,f):(n=Ce(d),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ye,o:ye,d(d){n&&n.d(d),d&&o(e),t=!1,s()}}}function Ke(r,e,t){let{isOpen:s=!1}=e,{title:n="Confirm Action"}=e,{message:d="Are you sure you want to proceed?"}=e,{confirmText:f="Confirm"}=e,{cancelText:C="Cancel"}=e,{onConfirm:b=()=>{}}=e,{onCancel:v=()=>{}}=e,{isDangerous:k=!1}=e;function H(){b(),t(0,s=!1)}function w(){v(),t(0,s=!1)}function _(c){c.key==="Escape"&&w(),c.key==="Enter"&&H()}function m(c){c.target===c.currentTarget&&w()}return r.$$set=c=>{"isOpen"in c&&t(0,s=c.isOpen),"title"in c&&t(1,n=c.title),"message"in c&&t(2,d=c.message),"confirmText"in c&&t(3,f=c.confirmText),"cancelText"in c&&t(4,C=c.cancelText),"onConfirm"in c&&t(10,b=c.onConfirm),"onCancel"in c&&t(11,v=c.onCancel),"isDangerous"in c&&t(5,k=c.isDangerous)},[s,n,d,f,C,k,H,w,_,m,b,v]}class We extends Be{constructor(e){super(),Ne(this,e,Ke,Ge,je,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:10,onCancel:11,isDangerous:5})}}function Ae(r,e,t){const s=r.slice();return s[11]=e[t],s}function Ie(r){let e,t,s=r[3].error+"",n;return{c(){e=h("div"),t=S("Error: "),n=S(s),this.h()},l(d){e=g(d,"DIV",{class:!0});var f=u(e);t=z(f,"Error: "),n=z(f,s),f.forEach(o),this.h()},h(){l(e,"class","mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded")},m(d,f){J(d,e,f),a(e,t),a(e,n)},p(d,f){f&8&&s!==(s=d[3].error+"")&&X(n,s)},d(d){d&&o(e)}}}function Oe(r){let e,t,s,n,d=Ve(r[11].name,40)+"",f,C,b,v=ae(r[11].created_on||r[11].id)+"",k,H,w,_,m=ae(r[11].created_on||r[11].id)+"",c,D,T,A,E,q,Y,R,p,x,I,O,K;function Q(){return r[8](r[11])}return{c(){e=h("tr"),t=h("td"),s=h("div"),n=h("span"),f=S(d),C=U(),b=h("span"),k=S(v),w=U(),_=h("td"),c=S(m),D=U(),T=h("td"),A=h("div"),E=h("a"),q=S("Chat"),R=U(),p=h("button"),x=S("Delete"),I=U(),this.h()},l(N){e=g(N,"TR",{class:!0});var y=u(e);t=g(y,"TD",{class:!0,title:!0});var L=u(t);s=g(L,"DIV",{class:!0});var G=u(s);n=g(G,"SPAN",{class:!0});var Z=u(n);f=z(Z,d),Z.forEach(o),C=M(G),b=g(G,"SPAN",{class:!0});var B=u(b);k=z(B,v),B.forEach(o),G.forEach(o),L.forEach(o),w=M(y),_=g(y,"TD",{class:!0});var W=u(_);c=z(W,m),W.forEach(o),D=M(y),T=g(y,"TD",{class:!0});var V=u(T);A=g(V,"DIV",{class:!0});var $=u(A);E=g($,"A",{class:!0,href:!0});var te=u(E);q=z(te,"Chat"),te.forEach(o),R=M($),p=g($,"BUTTON",{class:!0});var i=u(p);x=z(i,"Delete"),i.forEach(o),$.forEach(o),V.forEach(o),I=M(y),y.forEach(o),this.h()},h(){l(n,"class","truncate max-w-xs text-sm"),l(b,"class","text-xs text-gray-500 dark:text-gray-400 sm:hidden mt-1"),l(s,"class","flex flex-col"),l(t,"class","px-4 md:px-6 py-4 text-sm font-medium text-gray-800 dark:text-gray-200"),l(t,"title",H=r[11].name),l(_,"class","px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-gray-200 hidden sm:table-cell"),l(E,"class","text-blue-600 hover:text-blue-700 text-sm py-2 px-3 rounded-md bg-blue-50 dark:bg-blue-900/20 text-center font-medium transition-colors"),l(E,"href",Y="/documents/"+r[11].id),l(p,"class","text-red-600 hover:text-red-700 transition-colors text-sm py-2 px-3 rounded-md bg-red-50 dark:bg-red-900/20 font-medium"),l(A,"class","flex flex-col sm:flex-row sm:justify-end gap-2"),l(T,"class","px-4 md:px-6 py-4 whitespace-nowrap text-right text-sm font-medium"),l(e,"class","hover:bg-gray-100 dark:hover:bg-gray-700")},m(N,y){J(N,e,y),a(e,t),a(t,s),a(s,n),a(n,f),a(s,C),a(s,b),a(b,k),a(e,w),a(e,_),a(_,c),a(e,D),a(e,T),a(T,A),a(A,E),a(E,q),a(A,R),a(A,p),a(p,x),a(e,I),O||(K=le(p,"click",Q),O=!0)},p(N,y){r=N,y&4&&d!==(d=Ve(r[11].name,40)+"")&&X(f,d),y&4&&v!==(v=ae(r[11].created_on||r[11].id)+"")&&X(k,v),y&4&&H!==(H=r[11].name)&&l(t,"title",H),y&4&&m!==(m=ae(r[11].created_on||r[11].id)+"")&&X(c,m),y&4&&Y!==(Y="/documents/"+r[11].id)&&l(E,"href",Y)},d(N){N&&o(e),O=!1,K()}}}function Je(r){let e,t,s,n,d,f,C,b,v,k,H,w,_,m,c,D,T,A,E,q,Y,R,p,x,I,O,K,Q,N,y,L,G,Z;e=new Pe({});let B=r[3].error&&Ie(r),W=r[2],V=[];for(let i=0;i<W.length;i+=1)V[i]=Oe(Ae(r,W,i));function $(i){r[9](i)}let te={title:"Delete Document",message:r[1]?`Are you sure you want to delete "${r[1].name}"? This action cannot be undone and will remove the document, its embeddings, and all associated data.`:"",confirmText:"Delete",cancelText:"Cancel",isDangerous:!0,onConfirm:r[5],onCancel:r[6]};return r[0]!==void 0&&(te.isOpen=r[0]),L=new We({props:te}),Ue.push(()=>Me(L,"isOpen",$)),{c(){xe(e.$$.fragment),t=U(),s=h("div"),B&&B.c(),n=U(),d=h("div"),f=h("h2"),C=S("Your Documents"),b=U(),v=h("div"),k=h("a"),H=S("Upload Doc"),w=U(),_=h("div"),m=h("div"),c=h("div"),D=h("div"),T=h("table"),A=h("thead"),E=h("tr"),q=h("th"),Y=S("Name"),R=U(),p=h("th"),x=S("Date"),I=U(),O=h("th"),K=S("Action"),Q=U(),N=h("tbody");for(let i=0;i<V.length;i+=1)V[i].c();y=U(),xe(L.$$.fragment),this.h()},l(i){ke(e.$$.fragment,i),t=M(i),s=g(i,"DIV",{class:!0});var j=u(s);B&&B.l(j),n=M(j),d=g(j,"DIV",{class:!0});var F=u(d);f=g(F,"H2",{class:!0});var P=u(f);C=z(P,"Your Documents"),P.forEach(o),b=M(F),v=g(F,"DIV",{});var re=u(v);k=g(re,"A",{href:!0,class:!0});var de=u(k);H=z(de,"Upload Doc"),de.forEach(o),re.forEach(o),F.forEach(o),w=M(j),_=g(j,"DIV",{class:!0});var ce=u(_);m=g(ce,"DIV",{class:!0});var ue=u(m);c=g(ue,"DIV",{class:!0});var fe=u(c);D=g(fe,"DIV",{class:!0});var me=u(D);T=g(me,"TABLE",{class:!0});var se=u(T);A=g(se,"THEAD",{class:!0});var he=u(A);E=g(he,"TR",{});var ee=u(E);q=g(ee,"TH",{scope:!0,class:!0});var ge=u(q);Y=z(ge,"Name"),ge.forEach(o),R=M(ee),p=g(ee,"TH",{scope:!0,class:!0});var be=u(p);x=z(be,"Date"),be.forEach(o),I=M(ee),O=g(ee,"TH",{scope:!0,class:!0});var _e=u(O);K=z(_e,"Action"),_e.forEach(o),ee.forEach(o),he.forEach(o),Q=M(se),N=g(se,"TBODY",{class:!0});var ve=u(N);for(let ie=0;ie<V.length;ie+=1)V[ie].l(ve);ve.forEach(o),se.forEach(o),me.forEach(o),fe.forEach(o),ue.forEach(o),ce.forEach(o),j.forEach(o),y=M(i),ke(L.$$.fragment,i),this.h()},h(){l(f,"class","text-xl md:text-2xl font-semibold text-white"),l(k,"href","/documents/new"),l(k,"class","py-2.5 px-4 inline-flex justify-center items-center gap-2 rounded-lg border border-transparent font-medium bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all dark:focus:ring-offset-gray-800 text-sm"),l(d,"class","flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-3"),l(q,"scope","col"),l(q,"class","px-4 md:px-6 py-3.5 text-left text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"),l(p,"scope","col"),l(p,"class","px-4 md:px-6 py-3.5 text-left text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider hidden sm:table-cell"),l(O,"scope","col"),l(O,"class","px-4 md:px-6 py-3.5 text-right text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"),l(A,"class","bg-gray-50 dark:bg-gray-800 sticky top-0"),l(N,"class","divide-y divide-gray-200 dark:divide-gray-700"),l(T,"class","w-full divide-y divide-gray-200 dark:divide-gray-700"),l(D,"class","border rounded-lg overflow-hidden max-h-80 overflow-y-auto"),l(c,"class","inline-block min-w-full align-middle"),l(m,"class","overflow-x-auto"),l(_,"class","flex flex-col max-w-full"),l(s,"class","px-2 sm:px-4 py-6")},m(i,j){we(e,i,j),J(i,t,j),J(i,s,j),B&&B.m(s,null),a(s,n),a(s,d),a(d,f),a(f,C),a(d,b),a(d,v),a(v,k),a(k,H),a(s,w),a(s,_),a(_,m),a(m,c),a(c,D),a(D,T),a(T,A),a(A,E),a(E,q),a(q,Y),a(E,R),a(E,p),a(p,x),a(E,I),a(E,O),a(O,K),a(T,Q),a(T,N);for(let F=0;F<V.length;F+=1)V[F]&&V[F].m(N,null);J(i,y,j),we(L,i,j),Z=!0},p(i,[j]){if(i[3].error?B?B.p(i,j):(B=Ie(i),B.c(),B.m(s,n)):B&&(B.d(1),B=null),j&20){W=i[2];let P;for(P=0;P<W.length;P+=1){const re=Ae(i,W,P);V[P]?V[P].p(re,j):(V[P]=Oe(re),V[P].c(),V[P].m(N,null))}for(;P<V.length;P+=1)V[P].d(1);V.length=W.length}const F={};j&2&&(F.message=i[1]?`Are you sure you want to delete "${i[1].name}"? This action cannot be undone and will remove the document, its embeddings, and all associated data.`:""),!G&&j&1&&(G=!0,F.isOpen=i[0],Se(()=>G=!1)),L.$set(F)},i(i){Z||(De(e.$$.fragment,i),De(L.$$.fragment,i),Z=!0)},o(i){Ee(e.$$.fragment,i),Ee(L.$$.fragment,i),Z=!1},d(i){Te(e,i),i&&o(t),i&&o(s),B&&B.d(),ze(V,i),i&&o(y),Te(L,i)}}}function ae(r){if(!r)return"N/A";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}}function Ve(r,e=50){if(r.length<=e)return r;const t=r.split(".").pop(),s=r.substring(0,r.lastIndexOf("."));if(t){const n=e-t.length-4;return s.substring(0,n)+"...."+t}return r.substring(0,e-3)+"..."}function Qe(r,e,t){let s,n;Le(r,Fe,m=>t(3,n=m));let{data:d}=e;const f=d.documents||[];let C=!1,b=null;function v(m,c){t(1,b={id:m,name:c}),t(0,C=!0)}async function k(){if(b)try{console.log(`Deleting document: ${b.id}`),await qe(b.id),console.log("Document deleted successfully"),location.reload()}catch(m){console.error("Delete failed:",m),alert(`Failed to delete document: ${m}`)}finally{t(1,b=null)}}function H(){t(1,b=null)}const w=m=>v(m.id,m.name);function _(m){C=m,t(0,C)}return r.$$set=m=>{"data"in m&&t(7,d=m.data)},t(2,s=f.sort((m,c)=>{const D=new Date(m.created_on||m.id).getTime();return new Date(c.created_on||c.id).getTime()-D})),[C,b,s,n,v,k,H,d,w,_]}class et extends Be{constructor(e){super(),Ne(this,e,Qe,Je,je,{data:7})}}export{et as default};
